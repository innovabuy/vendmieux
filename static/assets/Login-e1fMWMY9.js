import{u as D,j as e}from"./index-DsKapFh0.js";import{d as L,b as o,L as b}from"./vendor-3wlXGvqm.js";import{u as R}from"./shared-H3sPg6Da.js";function T(){const t=R(),{login:j}=D(),S=L(),[r,u]=o.useState("login"),[l,v]=o.useState(""),[d,C]=o.useState(""),[g,z]=o.useState(""),[p,k]=o.useState(""),[m,w]=o.useState(""),[h,s]=o.useState(""),[a,x]=o.useState(!1),E=async n=>{n.preventDefault(),s(""),x(!0);try{const y=await fetch(r==="login"?"/api/auth/login":"/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r==="login"?{email:l,password:d}:{email:l,password:d,nom:g,prenom:p,entreprise_nom:m})}),c=await y.json();if(!y.ok)throw new Error(c.detail||"Erreur");j(c.token,c.user),S("/app/dashboard")}catch(f){s(f.message)}finally{x(!1)}},i={width:"100%",padding:"12px 14px",borderRadius:10,border:`1px solid ${t.bd}`,background:t.bgE,color:t.tx,fontSize:14,outline:"none",boxSizing:"border-box"};return e.jsxs("div",{style:{minHeight:"100vh",background:t.bg,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:24},children:[e.jsxs(b,{to:"/",style:{display:"flex",alignItems:"center",gap:10,textDecoration:"none",color:t.tx,marginBottom:32},children:[e.jsx("div",{style:{width:36,height:36,borderRadius:9,background:`linear-gradient(135deg,${t.ac},${t.acL})`,display:"flex",alignItems:"center",justifyContent:"center",fontSize:16,fontWeight:800,color:"#fff"},children:"V"}),e.jsxs("span",{style:{fontSize:20,fontWeight:600},children:["Vend",e.jsx("span",{style:{color:t.ac},children:"Mieux"})]})]}),e.jsxs("div",{style:{width:"100%",maxWidth:400,background:t.bgC,border:`1px solid ${t.bd}`,borderRadius:16,padding:32},children:[e.jsx("h2",{style:{margin:"0 0 6px",fontSize:20,fontWeight:700},children:r==="login"?"Connexion":"Inscription"}),e.jsx("p",{style:{margin:"0 0 24px",fontSize:13,color:t.mt},children:r==="login"?"Accédez à votre dashboard":"Créez votre compte commercial"}),h&&e.jsx("div",{style:{padding:"10px 14px",borderRadius:8,background:t.dnD,color:t.dn,fontSize:13,marginBottom:16},children:h}),e.jsxs("form",{onSubmit:E,style:{display:"flex",flexDirection:"column",gap:14},children:[r==="register"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",gap:10},children:[e.jsx("input",{placeholder:"Prénom",value:p,onChange:n=>k(n.target.value),style:i,required:!0}),e.jsx("input",{placeholder:"Nom",value:g,onChange:n=>z(n.target.value),style:i,required:!0})]}),e.jsx("input",{placeholder:"Nom de l'entreprise",value:m,onChange:n=>w(n.target.value),style:i})]}),e.jsx("input",{type:"email",placeholder:"Email",value:l,onChange:n=>v(n.target.value),style:i,required:!0}),e.jsx("input",{type:"password",placeholder:"Mot de passe",value:d,onChange:n=>C(n.target.value),style:i,required:!0,minLength:6}),e.jsx("button",{type:"submit",disabled:a,style:{padding:"12px 20px",borderRadius:10,border:"none",background:a?t.dm:`linear-gradient(135deg,${t.ac},${t.acL})`,color:"#fff",fontSize:14,fontWeight:600,cursor:a?"wait":"pointer",marginTop:4},children:a?"...":r==="login"?"Se connecter":"Créer mon compte"})]}),e.jsx("div",{style:{marginTop:20,textAlign:"center",fontSize:13,color:t.mt},children:r==="login"?e.jsxs(e.Fragment,{children:["Pas encore de compte ? ",e.jsx("button",{onClick:()=>{u("register"),s("")},style:{background:"none",border:"none",color:t.ac,cursor:"pointer",fontWeight:600,fontSize:13},children:"S'inscrire"})]}):e.jsxs(e.Fragment,{children:["Déjà un compte ? ",e.jsx("button",{onClick:()=>{u("login"),s("")},style:{background:"none",border:"none",color:t.ac,cursor:"pointer",fontWeight:600,fontSize:13},children:"Se connecter"})]})})]}),e.jsx("p",{style:{marginTop:24,fontSize:12,color:t.dm},children:e.jsx(b,{to:"/",style:{color:t.dm,textDecoration:"none"},children:"Retour au site"})})]})}export{T as default};
