import{b as C}from"./vendor-iPqs1NIt.js";import{_ as be,j as e,a as _e,u as Re}from"./index-DNsU-qWY.js";import{u as N}from"./shared-ChvG-CkP.js";function Je(){const a=C.useRef(null),n=C.useRef(!1);C.useEffect(()=>{if(n.current)return;n.current=!0;const l=new Audio("/static/sounds/phone-ring.mp3");return l.loop=!0,l.volume=.4,l.preload="auto",a.current=l,()=>{a.current&&(a.current.pause(),a.current.src="",a.current=null)}},[]);const s=C.useCallback(async()=>{a.current||(a.current=new Audio("/static/sounds/phone-ring.mp3"),a.current.loop=!0,a.current.volume=.4);try{a.current.currentTime=0,await a.current.play()}catch(l){console.warn("Ring tone failed:",l)}},[]),i=C.useCallback(()=>{a.current&&(a.current.pause(),a.current.currentTime=0)},[]);return{play:s,stop:i}}be(()=>import("./livekit-jb1bL6Ef.js"),[]);function Ye(){const a=C.useRef(null),n=C.useRef(null),s=C.useRef(null),i=C.useRef(null),l=C.useRef(!1),[u,r]=C.useState("idle"),[g,x]=C.useState(""),[c,d]=C.useState("00:00"),[y,z]=C.useState(!1),[h,k]=C.useState([]),[R,M]=C.useState({});C.useEffect(()=>()=>{a.current&&(a.current.disconnect(),a.current=null),n.current&&(clearInterval(n.current),n.current=null),document.querySelectorAll("audio[data-lk-sim]").forEach(_=>_.remove())},[]);const K=C.useCallback((_,F)=>{if(!_||!_.length)return;const I=F&&F.identity!==i.current?"agent":"user",O=[],J={},X=[];for(const L of _){const Y=L.text||L.final||"";if(!Y.trim())continue;const Z=L.id||L.sid||I+"-"+Date.now();(L.final!==void 0?L.final:L.isFinal)?(X.push(Z),O.push({who:I,text:Y.trim(),time:s.current?Date.now()-s.current:0})):J[Z]={who:I,text:Y.trim()}}O.length>0&&k(L=>[...L,...O]),(X.length>0||Object.keys(J).length>0)&&M(L=>{const Y={...L,...J};for(const Z of X)delete Y[Z];return Y})},[]),te=C.useCallback(async({tokenUrl:_,scenarioId:F,difficulty:D,userName:I,language:O,authToken:J,onPickup:X,prefetchedToken:L,demo:Y,on429:Z})=>{l.current=!1,r("connecting"),x("Appel en cours..."),k([]),M({}),z(!1);try{const ne=L?Promise.resolve(L):(async()=>{const t={"Content-Type":"application/json"};J&&(t.Authorization="Bearer "+J);const m=await fetch(_,{method:"POST",headers:t,body:JSON.stringify({scenario_id:F!=="__default__"?F:null,difficulty:D,user_name:I,language:O,...Y?{demo:!0}:{}})});if(m.status===429&&Z)throw Z(),new Error("429");if(!m.ok)throw new Error("Erreur serveur (token)");return m.json()})(),[oe,Q]=await Promise.all([ne,be(()=>import("./livekit-jb1bL6Ef.js"),[])]);i.current=oe.identity;const se=oe.session_db_id||null,H=new Q.Room({adaptiveStream:!0,dynacast:!0});return a.current=H,H.on(Q.RoomEvent.TrackSubscribed,t=>{if(t.kind==="audio"){X==null||X();const m=t.attach();m.setAttribute("data-lk-sim","true"),document.body.appendChild(m),r("connected"),x("En communication")}}),H.on(Q.RoomEvent.Reconnecting,()=>{r("connecting"),x("Reconnexion...")}),H.on(Q.RoomEvent.Reconnected,()=>{r("connected"),x("En communication")}),H.on(Q.RoomEvent.Disconnected,t=>{if(!l.current){r("error"),x("Connexion perdue");return}b()}),H.on(Q.RoomEvent.TranscriptionReceived,(t,m)=>{K(t,m)}),await H.connect(oe.url,oe.token),x("Activation du micro..."),await H.localParticipant.setMicrophoneEnabled(!0),r("ringing"),x("√áa sonne..."),Array.from(H.remoteParticipants.values()).length>0?(r("connected"),x("En communication")):H.on(Q.RoomEvent.ParticipantConnected,()=>{r("connected"),x("En communication")}),s.current=Date.now(),n.current=setInterval(()=>{if(!s.current)return;const t=Math.floor((Date.now()-s.current)/1e3);d(String(Math.floor(t/60)).padStart(2,"0")+":"+String(t%60).padStart(2,"0"))},1e3),{sessionDbId:se}}catch(ne){throw r("error"),x("Erreur : "+ne.message),ne}},[K]),b=C.useCallback(()=>{const _=s.current?Date.now()-s.current:0;return l.current=!0,a.current&&(a.current.disconnect(),a.current=null),n.current&&(clearInterval(n.current),n.current=null),document.querySelectorAll("audio[data-lk-sim]").forEach(F=>F.remove()),r("idle"),_},[]),P=C.useCallback(()=>{a.current&&z(_=>{const F=!_;return a.current.localParticipant.setMicrophoneEnabled(!F),F})},[]);return C.useCallback(()=>null,[]),{status:u,statusMsg:g,timer:c,muted:y,transcriptEntries:h,pendingSegments:R,connect:te,disconnect:b,toggleMute:P,t0Ref:s}}const ve=["accroche","decouverte","creation_enjeu","argumentation","traitement_objections","engagement"],Ie={accroche:"Accroche",decouverte:"D√©couverte",creation_enjeu:"Cr√©ation d'enjeu",argumentation:"Argumentation",traitement_objections:"Objections",engagement:"Engagement"},Te={rdv_obtenu:"RDV obtenu",mail_envoi:"Mail √† envoyer",rappel_prevu:"Rappel pr√©vu",echec_poli:"√âchec poli",echec_dur:"√âchec"},Ze=[{code:"fr",flag:"üá´üá∑",label:"Fran√ßais"},{code:"en",flag:"üá¨üáß",label:"English"},{code:"es",flag:"üá™üá∏",label:"Espa√±ol"},{code:"de",flag:"üá©üá™",label:"Deutsch"},{code:"it",flag:"üáÆüáπ",label:"Italiano"}],Ge=[{value:1,emoji:"üü¢",label:"Facile",desc:"Prospect ouvert, peu d'objections"},{value:2,emoji:"üü°",label:"Interm√©diaire",desc:"Prospect m√©fiant, objections classiques"},{value:3,emoji:"üî¥",label:"Difficile",desc:"Prospect hostile, objections dures, temps limit√©"}],Ee={D:"Dominance",I:"Influence",S:"Stabilit√©",C:"Conformit√©"};function ge({entries:a,pending:n}){const s=N(),i=C.useRef(null);return C.useEffect(()=>{i.current&&(i.current.scrollTop=i.current.scrollHeight)},[a,n]),a.length===0&&Object.keys(n).length===0?null:e.jsxs("div",{ref:i,style:{background:s.bgC,border:`1px solid ${s.bd}`,borderRadius:14,padding:16,marginTop:24,maxHeight:180,overflowY:"auto"},children:[a.map((u,r)=>e.jsxs("div",{style:{padding:"5px 0",fontSize:12.5,lineHeight:1.5,borderBottom:r<a.length-1?`1px solid ${s.bd}33`:"none"},children:[e.jsx("span",{style:{fontWeight:700,fontSize:10,textTransform:"uppercase",letterSpacing:.5,marginRight:6,color:u.who==="user"?s.bl:s.ac},children:u.who==="user"?"Vous":"Prospect"}),u.text]},r)),Object.entries(n).map(([u,r])=>e.jsxs("div",{style:{padding:"5px 0",fontSize:12.5,lineHeight:1.5,fontStyle:"italic",opacity:.6},children:[e.jsx("span",{style:{fontWeight:700,fontSize:10,textTransform:"uppercase",letterSpacing:.5,marginRight:6,color:r.who==="user"?s.bl:s.ac},children:r.who==="user"?"Vous":"Prospect"}),r.text]},u))]})}const fe=`
@keyframes sim-bar { 0%,100%{height:3px} 50%{height:28px} }
@keyframes sim-bar-rdv { 0%,100%{height:4px} 50%{height:32px} }
@keyframes sim-glow { 0%,100%{box-shadow:0 0 40px var(--sim-glow)} 50%{box-shadow:0 0 60px var(--sim-glow),0 0 90px rgba(212,133,74,0.08)} }
@keyframes sim-glow-rdv { 0%,100%{box-shadow:0 0 50px var(--sim-glow)} 50%{box-shadow:0 0 70px var(--sim-glow),0 0 100px rgba(212,133,74,0.1)} }
`;function pe({active:a,color:n,isRdv:s}){const i=[0,.12,.22,.08,.18,.28,.05];return e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:s?4:3,height:s?40:36,marginBottom:20,width:s?"100%":"auto"},children:i.map((l,u)=>e.jsx("div",{style:{width:s?3:3.5,background:s?void 0:n,backgroundImage:s?`linear-gradient(to top, transparent, ${n})`:void 0,borderRadius:2,height:a?void 0:s?4:3,animation:a?`${s?"sim-bar-rdv":"sim-bar"} 0.75s ease-in-out infinite ${l}s`:"none",transition:"height 0.1s"}},u))})}function Fe({elapsedSeconds:a,accentColor:n}){const s=N(),i=[{label:"Accroche",color:s.wr,maxSec:120},{label:"D√©couverte",color:s.bl,maxSec:300},{label:"Proposition",color:s.ok,maxSec:1/0}],l=a<120?0:a<300?1:2;return e.jsx("div",{style:{display:"flex",gap:2,width:"100%",marginBottom:16,borderRadius:6,overflow:"hidden"},children:i.map((u,r)=>e.jsx("div",{style:{flex:1,position:"relative",height:6,background:r===l?u.color:`${u.color}33`,transition:"background 0.5s",borderRadius:r===0?"6px 0 0 6px":r===2?"0 6px 6px 0":0},children:e.jsx("span",{style:{position:"absolute",top:10,left:"50%",transform:"translateX(-50%)",fontSize:9,fontWeight:600,letterSpacing:.3,whiteSpace:"nowrap",color:r===l?u.color:s.dm,transition:"color 0.5s"},children:u.label})},r))})}function We({status:a,transcriptEntries:n,pendingSegments:s}){const i=N();let l="‚óè √âcoute active",u=i.ok;const r=Object.values(s||{}),g=r.some(c=>c.who==="agent"),x=r.some(c=>c.who==="user");if(a!=="connected")l="‚óè En attente",u=i.mt;else if(g)l="‚óè Parle",u=i.ac;else if(x)l="‚óè √âcoute active",u=i.ok;else{const c=n[n.length-1];c&&Date.now()-(c.time||0)<3e3&&(l=c.who==="agent"?"‚óè R√©fl√©chit...":"‚óè √âcoute active",u=c.who==="agent"?i.wr:i.ok)}return e.jsx("div",{style:{display:"inline-flex",alignItems:"center",gap:4,padding:"4px 12px",borderRadius:20,fontSize:11,fontWeight:600,background:`${u}18`,color:u,transition:"all 0.3s"},children:l})}function Ke({persona:a,status:n,statusMsg:s,timer:i,muted:l,transcriptEntries:u,pendingSegments:r,onStart:g,onMute:x,onStop:c,isRdvPhysique:d,scenario:y,elapsedSeconds:z}){const h=N(),k=n==="intro",R=n==="connected"||n==="ringing"||k,M=n==="idle"||n==="error",K=!M&&!k,te=n==="connected"?"ok":n==="error"?"err":"",b=k?h.ac:te==="ok"?h.ok:te==="err"?h.dn:h.mt,P=Object.values(r||{}),_=P.some(O=>O.who==="agent"),D=P.some(O=>O.who==="user")?"Vous":_&&a?`${a.prenom} ${a.nom}`:null,I=a==null?void 0:a.entreprise;return d?e.jsxs("div",{style:{textAlign:"center",maxWidth:560,margin:"0 auto",position:"relative"},children:[e.jsx("style",{children:fe}),e.jsx("div",{style:{position:"fixed",inset:0,pointerEvents:"none",zIndex:0,background:"radial-gradient(ellipse at center, rgba(20,30,50,0.8) 0%, #080D1A 70%)"}}),e.jsxs("div",{style:{marginBottom:8,position:"relative",zIndex:1},children:[e.jsx("div",{style:{fontSize:16,fontWeight:600,marginBottom:4},children:"üè¢ Entretien en cours"}),I&&e.jsxs("div",{style:{color:h.mt,fontSize:13,marginBottom:6},children:[I.nom,I.siege?` ¬∑ ${I.siege}`:"",I.ville?` ¬∑ ${I.ville}`:""]}),e.jsxs("div",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:12,color:h.mt,marginBottom:16},children:["Dur√©e de l'entretien : ",i]})]}),e.jsxs("div",{style:{width:280,margin:"0 auto",padding:"24px 20px 20px",background:h.bgC,border:`1px solid ${h.bd}`,borderRadius:18,position:"relative",zIndex:1},children:[e.jsx(Fe,{elapsedSeconds:z||0,accentColor:h.ac}),e.jsx("div",{style:{"--sim-glow":h.acD,width:72,height:72,borderRadius:"50%",background:h.bgE,border:`3px solid ${R?h.ac:h.bd}`,display:"grid",placeItems:"center",margin:"8px auto 14px",fontSize:30,transition:"all 0.3s",boxShadow:R?`0 0 50px ${h.acD}`:"none",animation:R?"sim-glow-rdv 1.8s ease-in-out infinite":"none"},children:k?"üè¢":"üë§"}),a&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{fontSize:18,fontWeight:700,marginBottom:2,letterSpacing:-.3},children:[a.prenom," ",a.nom]}),e.jsx("div",{style:{color:h.mt,fontSize:12,marginBottom:4},children:a.poste}),e.jsx("div",{style:{color:h.dm,fontSize:11,marginBottom:12},children:I==null?void 0:I.nom})]}),e.jsx(We,{status:n,transcriptEntries:u,pendingSegments:r}),e.jsxs("div",{style:{marginTop:16},children:[e.jsx(pe,{active:n==="connected",color:h.ac,isRdv:!0}),D&&n==="connected"&&e.jsx("div",{style:{fontSize:11,color:h.mt,marginTop:-14,marginBottom:8},children:D})]}),e.jsx("div",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:11,color:b,marginBottom:16,minHeight:16},children:k?"Arriv√©e dans les locaux...":s||"Pr√™t pour l'entretien"}),e.jsxs("div",{style:{display:"flex",gap:14,justifyContent:"center"},children:[M&&e.jsx("button",{onClick:g,style:{width:58,height:58,borderRadius:"50%",border:"none",display:"grid",placeItems:"center",fontSize:22,cursor:"pointer",transition:"all 0.15s",background:h.ok,color:"#fff",boxShadow:`0 4px 20px ${h.okD}`},children:"üè¢"}),K&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:x,style:{width:58,height:58,borderRadius:"50%",border:l?"none":`1px solid ${h.bd}`,display:"grid",placeItems:"center",fontSize:22,cursor:"pointer",transition:"all 0.15s",background:l?h.dn:h.bgC,color:l?"#fff":h.tx},children:l?"üîá":"üéôÔ∏è"}),e.jsx("button",{onClick:c,style:{display:"flex",alignItems:"center",justifyContent:"center",gap:8,height:46,padding:"0 20px",borderRadius:23,border:"none",fontSize:13,fontWeight:600,cursor:"pointer",transition:"all 0.15s",background:h.dn,color:"#fff",boxShadow:`0 4px 20px ${h.dnD}`,fontFamily:"inherit"},children:"ü§ù Mettre fin √† l'entretien"})]})]})]}),R&&e.jsxs("div",{style:{position:"fixed",bottom:24,left:24,display:"flex",alignItems:"center",gap:6,opacity:.5,fontSize:12,color:h.mt,zIndex:2},children:["üîä ",e.jsx("span",{children:"Ambiance bureau"})]}),e.jsx("div",{style:{position:"relative",zIndex:1},children:e.jsx(ge,{entries:u,pending:r})})]}):e.jsxs("div",{style:{textAlign:"center",maxWidth:560,margin:"0 auto"},children:[e.jsx("style",{children:fe}),e.jsx("div",{style:{"--sim-glow":h.acD,width:110,height:110,borderRadius:"50%",background:h.bgC,border:`3px solid ${R?h.ac:h.bd}`,display:"grid",placeItems:"center",margin:"0 auto 22px",fontSize:44,transition:"all 0.3s",boxShadow:R?`0 0 40px ${h.acD}`:"none",animation:R?"sim-glow 1.8s ease-in-out infinite":"none"},children:k?"üè¢":"üë§"}),a&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{fontSize:22,fontWeight:700,marginBottom:3,letterSpacing:-.3},children:[a.prenom," ",a.nom]}),e.jsxs("div",{style:{color:h.mt,fontSize:13,marginBottom:28},children:[a.poste," ‚Äî ",a.entreprise.nom]})]}),e.jsx(pe,{active:n==="connected",color:h.ac}),e.jsx("div",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:12,color:b,marginBottom:20,minHeight:18},children:s||"Pr√™t √† appeler"}),e.jsx("div",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:32,fontWeight:300,color:h.tx,marginBottom:28,letterSpacing:3},children:i}),e.jsxs("div",{style:{display:"flex",gap:14,justifyContent:"center"},children:[M&&e.jsx("button",{onClick:g,style:{width:58,height:58,borderRadius:"50%",border:"none",display:"grid",placeItems:"center",fontSize:22,cursor:"pointer",transition:"all 0.15s",background:h.ok,color:"#fff",boxShadow:`0 4px 20px ${h.okD}`},children:"üìû"}),K&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:x,style:{width:58,height:58,borderRadius:"50%",border:l?"none":`1px solid ${h.bd}`,display:"grid",placeItems:"center",fontSize:22,cursor:"pointer",transition:"all 0.15s",background:l?h.dn:h.bgC,color:l?"#fff":h.tx},children:l?"üîá":"üéôÔ∏è"}),e.jsx("button",{onClick:c,style:{width:58,height:58,borderRadius:"50%",border:"none",display:"grid",placeItems:"center",fontSize:22,cursor:"pointer",transition:"all 0.15s",background:h.dn,color:"#fff",boxShadow:`0 4px 20px ${h.dnD}`},children:"‚úï"})]})]}),e.jsx(ge,{entries:u,pending:r})]})}function Ae(a){const n=Math.floor(a/1e3);return String(Math.floor(n/60)).padStart(2,"0")+":"+String(n%60).padStart(2,"0")}function Xe({persona:a,duration:n,transcriptEntries:s,evalLoading:i,evalError:l,children:u}){const r=N();let g=0,x=null;for(const d of s)d.who!==x&&(g++,x=d.who);const c=s.reduce((d,y)=>d+y.text.split(/\s+/).filter(z=>z).length,0);return e.jsxs("div",{children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:28},children:[e.jsx("div",{style:{fontSize:22,fontWeight:700,marginBottom:6},children:"Appel termin√©"}),a&&e.jsxs("div",{style:{color:r.mt,fontSize:14},children:[a.prenom," ",a.nom," ‚Äî ",a.poste,", ",a.entreprise.nom]})]}),e.jsx("div",{className:"sim-post-stats",style:{display:"flex",gap:16,justifyContent:"center",marginBottom:28},children:[{value:Ae(n),label:"Dur√©e"},{value:g,label:"√âchanges"},{value:c,label:"Mots"}].map((d,y)=>e.jsxs("div",{style:{background:r.bgC,border:`1px solid ${r.bd}`,borderRadius:10,padding:"16px 24px",textAlign:"center",minWidth:120},children:[e.jsx("div",{style:{fontSize:24,fontWeight:700,fontFamily:"'JetBrains Mono', monospace",marginBottom:4},children:d.value}),e.jsx("div",{style:{fontSize:11,color:r.dm,textTransform:"uppercase",letterSpacing:.8,fontWeight:600},children:d.label})]},y))}),i&&e.jsxs("div",{style:{textAlign:"center",padding:"48px 20px",color:r.mt},children:[e.jsx("div",{style:{display:"inline-block",width:36,height:36,border:`3px solid ${r.bd}`,borderTopColor:r.ac,borderRadius:"50%",animation:"spin 0.6s linear infinite",marginBottom:16}}),e.jsx("style",{children:"@keyframes spin { to { transform: rotate(360deg); } }"}),e.jsx("div",{style:{fontSize:15,fontWeight:600,marginBottom:4},children:"√âvaluation FORCE 3D en cours..."}),e.jsx("div",{style:{fontSize:12,color:r.dm},children:"Claude analyse votre performance commerciale"})]}),l&&e.jsxs("div",{style:{textAlign:"center",padding:"48px 20px",color:r.dn},children:["Erreur √©valuation : ",l]}),u]})}const Pe=["Accroche","D√©couverte",`Cr√©ation
d'enjeu`,"Argumentation","Objections","Engagement"];function De({competences:a,width:n=340,height:s=340}){const i=C.useRef(null),{isDark:l}=_e();return C.useEffect(()=>{const u=i.current;if(!u)return;const r=u.getContext("2d"),g=window.devicePixelRatio||1;u.width=n*g,u.height=s*g,u.style.width=n+"px",u.style.height=s+"px",r.scale(g,g);const x=n/2,c=s/2,d=Math.min(n,s)/2-40,y=6,z=ve.map(b=>(a[b]||{}).score||0),h=l?"rgba(35,35,54,0.6)":"rgba(0,0,0,0.1)",k=l?"rgba(35,35,54,0.4)":"rgba(0,0,0,0.06)",R=l?"#7c7c9a":"#5c5c5c",M=l?"#08080d":"#F5F3EF",K=l?"rgba(212,133,74,0.15)":"rgba(196,117,57,0.15)",te=l?"#D4854A":"#C47539";r.strokeStyle=h,r.lineWidth=1;for(let b=1;b<=4;b++){const P=b/4*d;r.beginPath();for(let _=0;_<=y;_++){const F=Math.PI*2*_/y-Math.PI/2,D=x+P*Math.cos(F),I=c+P*Math.sin(F);_===0?r.moveTo(D,I):r.lineTo(D,I)}r.closePath(),r.stroke()}r.strokeStyle=k;for(let b=0;b<y;b++){const P=Math.PI*2*b/y-Math.PI/2;r.beginPath(),r.moveTo(x,c),r.lineTo(x+d*Math.cos(P),c+d*Math.sin(P)),r.stroke()}r.beginPath();for(let b=0;b<=y;b++){const P=b%y,_=Math.PI*2*P/y-Math.PI/2,F=z[P]/20*d,D=x+F*Math.cos(_),I=c+F*Math.sin(_);b===0?r.moveTo(D,I):r.lineTo(D,I)}r.closePath(),r.fillStyle=K,r.fill(),r.strokeStyle=te,r.lineWidth=2.5,r.stroke();for(let b=0;b<y;b++){const P=Math.PI*2*b/y-Math.PI/2,_=z[b]/20*d,F=x+_*Math.cos(P),D=c+_*Math.sin(P);r.beginPath(),r.arc(F,D,4,0,Math.PI*2),r.fillStyle=z[b]>=14?"#22c55e":z[b]>=8?"#f59e0b":"#ef4444",r.fill(),r.strokeStyle=M,r.lineWidth=2,r.stroke()}r.textAlign="center",r.textBaseline="middle",r.fillStyle=R,r.font="11px 'DM Sans', sans-serif";for(let b=0;b<y;b++){const P=Math.PI*2*b/y-Math.PI/2,_=d+22,F=x+_*Math.cos(P),D=c+_*Math.sin(P),I=Pe[b].split(`
`);I.forEach((O,J)=>{r.fillText(O,F,D+(J-(I.length-1)/2)*13)}),r.fillStyle=z[b]>=14?"#22c55e":z[b]>=8?"#f59e0b":"#ef4444",r.font="bold 11px 'JetBrains Mono', monospace",r.fillText(z[b]+"/20",F,D+I.length*13),r.fillStyle=R,r.font="11px 'DM Sans', sans-serif"}},[a,l,n,s]),e.jsx("canvas",{ref:i,style:{display:"block",margin:"0 auto"}})}function ie({score:a}){const n=(a/20*100).toFixed(0),s=N(),i=a>=14?s.ok:a>=8?s.wr:s.dn;return e.jsx("div",{style:{height:6,background:s.bgE,borderRadius:3,marginBottom:12,overflow:"hidden"},children:e.jsx("div",{style:{height:"100%",borderRadius:3,width:n+"%",background:i,transition:"width 0.6s ease"}})})}function $e({p:a}){const n=N();return typeof a=="string"?e.jsxs("div",{style:{marginBottom:3},children:["- ",a]}):e.jsxs("div",{style:{marginBottom:10,padding:10,background:n.bgE,borderRadius:6,border:`1px solid ${n.bd}`},children:[e.jsxs("div",{style:{fontSize:12,lineHeight:1.5,color:n.dn,marginBottom:6},children:['‚ùå Ce que vous avez dit : "',a.ce_que_vous_avez_dit||"",'"']}),e.jsxs("div",{style:{fontSize:12,lineHeight:1.5,color:n.ok,marginBottom:4},children:['‚úÖ Version am√©lior√©e : "',a.ce_qui_aurait_ete_mieux||"",'"']}),a.pourquoi&&e.jsxs("div",{style:{fontSize:11,lineHeight:1.4,color:n.dm,fontStyle:"italic"},children:["üí° ",a.pourquoi]})]})}function Le({compKey:a,comp:n}){const s=N(),i=Ie[a],l=n.score||0,u=l>=14?s.ok:l>=8?s.wr:s.dn;return e.jsxs("div",{style:{background:s.bgC,border:`1px solid ${s.bd}`,borderRadius:10,padding:18},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:10},children:[e.jsx("div",{style:{fontSize:12,fontWeight:700,textTransform:"uppercase",letterSpacing:.8,color:s.dm},children:i}),e.jsxs("div",{style:{fontSize:16,fontWeight:800,fontFamily:"'JetBrains Mono', monospace",color:u},children:[l,"/20"]})]}),e.jsx(ie,{score:l}),(n.points_forts||[]).length>0&&e.jsxs("div",{style:{fontSize:12,lineHeight:1.55,marginBottom:8},children:[e.jsx("div",{style:{fontWeight:700,color:s.dm,fontSize:10,textTransform:"uppercase",letterSpacing:.6,marginBottom:3},children:"Points forts"}),e.jsx("div",{style:{color:s.ok},children:(n.points_forts||[]).map((r,g)=>e.jsxs("div",{children:["+ ",r]},g))})]}),(n.points_progres||[]).length>0&&e.jsxs("div",{style:{fontSize:12,lineHeight:1.55,marginBottom:8},children:[e.jsx("div",{style:{fontWeight:700,color:s.dm,fontSize:10,textTransform:"uppercase",letterSpacing:.6,marginBottom:3},children:"Points de progr√®s"}),(n.points_progres||[]).map((r,g)=>e.jsx($e,{p:r},g))]}),n.conseil&&e.jsx("div",{style:{fontStyle:"italic",color:s.acL,fontSize:12,marginTop:6,paddingTop:6,borderTop:`1px solid ${s.bd}`},children:n.conseil})]})}function qe({pc:a}){const n=N();if(!a)return null;const s=c=>({col:c>=14?n.ok:c>=8?n.wr:n.dn}),i=a.ton_general||{},l=a.assurance||{},u=a.formulation||{},r=a.score_posture||0,g=s(r).col,x=(c,d)=>(c||[]).map((y,z)=>e.jsxs("div",{style:{marginBottom:10,padding:10,background:n.bgE,borderRadius:6,border:`1px solid ${n.bd}`},children:[e.jsxs("div",{style:{fontSize:12,color:n.dn,marginBottom:6},children:['‚ùå "',y[d.said]||"",'"']}),e.jsxs("div",{style:{fontSize:12,color:n.dm,fontStyle:"italic",marginBottom:4},children:["üí° ",y[d.why]||""]}),e.jsxs("div",{style:{fontSize:12,color:n.ok},children:['‚úÖ "',y[d.better]||"",'"']}),y[d.tip]&&e.jsx("div",{style:{fontSize:11,color:n.acL,fontStyle:"italic",marginTop:4},children:y[d.tip]})]},z));return e.jsxs("div",{style:{marginBottom:28},children:[e.jsx("div",{style:{fontSize:18,fontWeight:700,marginBottom:18,display:"flex",alignItems:"center",gap:10},children:"üé§ Votre posture commerciale"}),e.jsxs("div",{style:{background:n.bgC,border:`1px solid ${n.bd}`,borderRadius:10,padding:18,textAlign:"center",marginBottom:12},children:[e.jsxs("div",{style:{fontSize:28,fontWeight:800,fontFamily:"'JetBrains Mono', monospace",color:g},children:[r,e.jsx("span",{style:{fontSize:14,color:n.dm,fontWeight:400},children:"/20"})]}),e.jsx(ie,{score:r}),e.jsx("div",{style:{fontSize:11,color:n.dm,textTransform:"uppercase",letterSpacing:.8,fontWeight:600,marginTop:4},children:"Score posture globale"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:14,marginBottom:16},children:[e.jsxs("div",{style:{background:n.bgC,border:`1px solid ${n.bd}`,borderRadius:10,padding:18},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:10},children:[e.jsx("div",{style:{fontSize:12,fontWeight:700,textTransform:"uppercase",letterSpacing:.8,color:n.dm},children:"üé§ Ton"}),e.jsxs("div",{style:{fontSize:16,fontWeight:800,fontFamily:"'JetBrains Mono', monospace",color:s(i.note||0).col},children:[i.note||0,"/20"]})]}),e.jsx(ie,{score:i.note||0}),i.description&&e.jsx("div",{style:{fontSize:13,color:n.mt,marginBottom:10,fontStyle:"italic"},children:i.description}),(i.moments_positifs||[]).length>0&&e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("div",{style:{fontWeight:700,color:n.dm,fontSize:10,textTransform:"uppercase",letterSpacing:.6,marginBottom:3},children:"Moments positifs"}),(i.moments_positifs||[]).map((c,d)=>e.jsxs("div",{style:{fontSize:12,color:n.ok,marginBottom:3},children:["‚úÖ ",c]},d))]}),(i.moments_a_ameliorer||[]).length>0&&e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700,color:n.dm,fontSize:10,textTransform:"uppercase",letterSpacing:.6,marginBottom:3},children:"√Ä am√©liorer"}),x(i.moments_a_ameliorer,{said:"ce_que_vous_avez_dit",why:"probleme",better:"version_amelioree",tip:"conseil"})]})]}),e.jsxs("div",{style:{background:n.bgC,border:`1px solid ${n.bd}`,borderRadius:10,padding:18},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:10},children:[e.jsx("div",{style:{fontSize:12,fontWeight:700,textTransform:"uppercase",letterSpacing:.8,color:n.dm},children:"üí™ Assurance"}),e.jsxs("div",{style:{fontSize:16,fontWeight:800,fontFamily:"'JetBrains Mono', monospace",color:s(l.note||0).col},children:[l.note||0,"/20"]})]}),e.jsx(ie,{score:l.note||0}),l.description&&e.jsx("div",{style:{fontSize:13,color:n.mt,marginBottom:10,fontStyle:"italic"},children:l.description}),(l.marqueurs_confiance||[]).length>0&&e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("div",{style:{fontWeight:700,color:n.dm,fontSize:10,textTransform:"uppercase",letterSpacing:.6,marginBottom:3},children:"Marqueurs de confiance"}),(l.marqueurs_confiance||[]).map((c,d)=>e.jsxs("div",{style:{fontSize:12,color:n.ok,marginBottom:3},children:["‚úÖ ",c]},d))]}),(l.marqueurs_hesitation||[]).length>0&&e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700,color:n.dm,fontSize:10,textTransform:"uppercase",letterSpacing:.6,marginBottom:3},children:"Marqueurs d'h√©sitation"}),x(l.marqueurs_hesitation,{said:"verbatim",why:"indice",better:"reformulation",tip:null})]})]}),e.jsxs("div",{style:{background:n.bgC,border:`1px solid ${n.bd}`,borderRadius:10,padding:18},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:10},children:[e.jsx("div",{style:{fontSize:12,fontWeight:700,textTransform:"uppercase",letterSpacing:.8,color:n.dm},children:"‚úèÔ∏è Formulation"}),e.jsxs("div",{style:{fontSize:16,fontWeight:800,fontFamily:"'JetBrains Mono', monospace",color:s(u.note||0).col},children:[u.note||0,"/20"]})]}),e.jsx(ie,{score:u.note||0}),u.description&&e.jsx("div",{style:{fontSize:13,color:n.mt,marginBottom:10,fontStyle:"italic"},children:u.description}),(u.points_forts||[]).length>0&&e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("div",{style:{fontWeight:700,color:n.dm,fontSize:10,textTransform:"uppercase",letterSpacing:.6,marginBottom:3},children:"Points forts"}),(u.points_forts||[]).map((c,d)=>e.jsxs("div",{style:{fontSize:12,color:n.ok,marginBottom:3},children:["‚úÖ ",c]},d))]}),(u.points_a_ameliorer||[]).length>0&&e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700,color:n.dm,fontSize:10,textTransform:"uppercase",letterSpacing:.6,marginBottom:3},children:"√Ä am√©liorer"}),x(u.points_a_ameliorer,{said:"ce_que_vous_avez_dit",why:"probleme",better:"version_amelioree",tip:"principe"})]})]})]}),a.conseil_posture&&e.jsxs("div",{style:{background:n.acD,border:`1px solid ${n.ac}33`,borderRadius:10,padding:"14px 18px",marginTop:12},children:[e.jsx("div",{style:{fontSize:10,fontWeight:700,textTransform:"uppercase",letterSpacing:1,color:n.ac,marginBottom:4},children:"Conseil posture"}),e.jsx("div",{style:{fontSize:13,color:n.tx,fontWeight:500},children:a.conseil_posture})]})]})}function Oe({disc:a}){const n=N();if(!a)return null;const s=a.profil_prospect||{},i=a.adaptation_commerciale||{},l=(s.type_principal||"").toUpperCase(),u=s.type_secondaire?s.type_secondaire.toUpperCase():null,r=i.score_adaptation||0,g=r>=14?n.ok:r>=8?n.wr:n.dn,x={D:"#ef4444",I:"#eab308",S:"#22c55e",C:"#3b82f6"};return e.jsxs("div",{style:{marginBottom:28},children:[e.jsx("div",{style:{fontSize:18,fontWeight:700,marginBottom:18,display:"flex",alignItems:"center",gap:10},children:"üß† Profil DISC de votre interlocuteur"}),e.jsx("div",{style:{display:"flex",justifyContent:"center",gap:16,marginBottom:20},children:["D","I","S","C"].map(c=>{const d=c===l,y=c===u,z=x[c];return e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx("div",{style:{width:64,height:64,borderRadius:16,display:"grid",placeItems:"center",fontSize:28,fontWeight:800,fontFamily:"'JetBrains Mono', monospace",transition:"all 0.3s",border:`2px solid ${d||y?z:n.bd}`,color:d||y?z:n.dm,background:d||y?`${z}14`:n.bgC,opacity:d?1:y?.75:.35,transform:d?"scale(1.1)":"none",boxShadow:d?`0 4px 20px ${z}4D`:"none"},children:c}),e.jsx("div",{style:{fontSize:9,fontWeight:600,textTransform:"uppercase",letterSpacing:.5,marginTop:4,textAlign:"center",color:d||y?z:n.dm},children:Ee[c]})]},c)})}),e.jsxs("div",{style:{background:n.bgC,border:`1px solid ${n.bd}`,borderRadius:10,padding:18,marginBottom:14},children:[s.description&&e.jsx("div",{style:{fontSize:14,lineHeight:1.6,color:n.mt,marginBottom:12},children:s.description}),(s.indices_detectes||[]).length>0&&e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700,color:n.dm,fontSize:10,textTransform:"uppercase",letterSpacing:.6,marginBottom:3},children:"Indices d√©tect√©s"}),e.jsx("ul",{style:{listStyle:"none",padding:0},children:(s.indices_detectes||[]).map((c,d)=>e.jsxs("li",{style:{fontSize:12,color:n.mt,padding:"4px 0",borderBottom:`1px solid ${n.bd}33`},children:["üîç ",c]},d))})]})]}),e.jsxs("div",{style:{background:n.bgC,border:`1px solid ${n.bd}`,borderRadius:10,padding:18,marginBottom:14},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:10},children:[e.jsx("div",{style:{fontSize:14,fontWeight:700},children:"Votre adaptation √† ce profil"}),e.jsxs("div",{style:{fontSize:16,fontWeight:800,fontFamily:"'JetBrains Mono', monospace",color:g},children:[r,"/20"]})]}),e.jsx(ie,{score:r}),(i.ce_qui_a_marche||[]).length>0&&e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("div",{style:{fontWeight:700,color:n.ok,fontSize:10,textTransform:"uppercase",letterSpacing:.6,marginBottom:3},children:"Ce qui a march√©"}),(i.ce_qui_a_marche||[]).map((c,d)=>e.jsxs("div",{style:{fontSize:12,padding:"8px 10px",marginBottom:6,background:`${n.ok}0F`,borderRadius:6,borderLeft:`3px solid ${n.ok}`},children:[e.jsxs("div",{style:{color:n.ok,fontWeight:600,marginBottom:2},children:['"',c.verbatim||"",'"']}),e.jsx("div",{style:{color:n.mt,fontStyle:"italic"},children:c.pourquoi_adapte||""})]},d))]}),(i.ce_qui_na_pas_marche||[]).length>0&&e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700,color:n.wr,fontSize:10,textTransform:"uppercase",letterSpacing:.6,marginBottom:3},children:"Ce qui n'a pas march√©"}),(i.ce_qui_na_pas_marche||[]).map((c,d)=>e.jsxs("div",{style:{marginBottom:10,padding:10,background:n.bgE,borderRadius:6,border:`1px solid ${n.bd}`},children:[e.jsxs("div",{style:{fontSize:12,color:n.dn,marginBottom:6},children:['‚ùå "',c.verbatim||"",'"']}),e.jsxs("div",{style:{fontSize:12,color:n.dm,marginBottom:4},children:["üí° ",c.pourquoi_inadapte||""]}),e.jsxs("div",{style:{fontSize:12,color:n.ok},children:['‚úÖ "',c.ce_quil_aurait_fallu_dire||"",'"']}),c.principe_disc&&e.jsx("div",{style:{fontSize:11,color:n.bl,fontStyle:"italic",marginTop:4},children:c.principe_disc})]},d))]})]}),i.strategie_ideale&&e.jsxs("div",{style:{background:`${n.bl}0F`,border:`1px solid ${n.bl}40`,borderRadius:10,padding:"16px 18px",marginTop:14},children:[e.jsx("div",{style:{fontSize:10,fontWeight:700,textTransform:"uppercase",letterSpacing:1,color:n.bl,marginBottom:6},children:"üéØ Strat√©gie id√©ale pour ce profil"}),e.jsx("div",{style:{fontSize:13,lineHeight:1.6,color:n.tx},children:i.strategie_ideale})]})]})}function Qe({evaluation:a,transcriptEntries:n,isFreeMode:s}){const i=N(),{token:l}=Re(),[u,r]=C.useState(!1);if(!a)return null;const g=a,x=g.score_global>=14?i.ok:g.score_global>=10?i.wr:i.dn,c={A:i.ok,B:i.bl,C:i.wr,D:i.dn,E:i.dn},d={A:i.okD,B:i.blD,C:i.wrD,D:i.dnD,E:i.dnD},y=c[g.note_lettre]||i.mt,z=d[g.note_lettre]||i.bgE,h={rdv_obtenu:i.ok,mail_envoi:i.bl,rappel_prevu:i.wr,echec_poli:i.wr,echec_dur:i.dn}[g.resultat_appel]||i.mt,k=g.moment_cle;return e.jsxs("div",{children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:32,padding:28,background:i.bgC,border:`1px solid ${i.bd}`,borderRadius:14},children:[e.jsxs("div",{style:{fontSize:56,fontWeight:800,fontFamily:"'JetBrains Mono', monospace",letterSpacing:-2,lineHeight:1,color:x},children:[g.score_global,e.jsx("span",{style:{fontSize:20,color:i.dm,fontWeight:400},children:"/20"})]}),e.jsx("div",{style:{display:"inline-block",padding:"4px 16px",borderRadius:20,fontSize:18,fontWeight:800,marginTop:10,background:z,color:y},children:g.note_lettre||"?"}),e.jsx("div",{style:{marginTop:10,fontSize:12,color:h,fontWeight:600},children:Te[g.resultat_appel]||g.resultat_appel||""})]}),e.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:32},children:e.jsx(De,{competences:g.competences||{}})}),e.jsx("div",{className:"sim-eval-grid",style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:14,marginBottom:28},children:ve.map(R=>e.jsx(Le,{compKey:R,comp:(g.competences||{})[R]||{score:0}},R))}),e.jsx(qe,{pc:g.posture_commerciale}),e.jsx(Oe,{disc:g.analyse_disc}),g.synthese&&e.jsxs("div",{style:{background:i.bgC,border:`1px solid ${i.bd}`,borderRadius:14,padding:20,marginBottom:20},children:[e.jsx("div",{style:{fontSize:12,fontWeight:700,textTransform:"uppercase",letterSpacing:1,color:i.dm,marginBottom:10},children:"Synth√®se"}),e.jsx("div",{style:{fontSize:14,lineHeight:1.65,color:i.mt},children:g.synthese})]}),g.conseil_prioritaire&&e.jsxs("div",{style:{background:i.acD,border:`1px solid ${i.ac}33`,borderRadius:10,padding:"16px 20px",marginBottom:24},children:[e.jsx("div",{style:{fontSize:10,fontWeight:700,textTransform:"uppercase",letterSpacing:1,color:i.ac,marginBottom:6},children:"Conseil prioritaire"}),e.jsx("div",{style:{fontSize:14,color:i.tx,fontWeight:500},children:g.conseil_prioritaire})]}),k&&k.quand&&e.jsxs("div",{style:{background:i.bgC,border:`1px solid ${i.bd}`,borderLeft:`4px solid ${i.wr}`,borderRadius:10,padding:20,marginBottom:24},children:[e.jsx("div",{style:{fontSize:16,fontWeight:700,marginBottom:14},children:"‚ö° Le moment d√©cisif de votre appel"}),e.jsxs("div",{style:{marginBottom:12},children:[e.jsx("div",{style:{fontSize:10,fontWeight:700,textTransform:"uppercase",letterSpacing:.8,color:i.dm,marginBottom:4},children:"Contexte"}),e.jsx("div",{style:{fontSize:13.5,lineHeight:1.55},children:k.quand})]}),e.jsxs("div",{style:{marginBottom:12},children:[e.jsx("div",{style:{fontSize:10,fontWeight:700,textTransform:"uppercase",letterSpacing:.8,color:i.dn,marginBottom:4},children:"Ce que vous avez dit"}),e.jsxs("div",{style:{fontSize:13.5,lineHeight:1.55,color:i.dn,background:i.dnD,padding:"8px 12px",borderRadius:6},children:['"',k.ce_que_vous_avez_dit||"",'"']})]}),e.jsxs("div",{style:{marginBottom:12},children:[e.jsx("div",{style:{fontSize:10,fontWeight:700,textTransform:"uppercase",letterSpacing:.8,color:i.ok,marginBottom:4},children:"Ce qu'il aurait fallu dire"}),e.jsxs("div",{style:{fontSize:13.5,lineHeight:1.55,color:i.ok,background:i.okD,padding:"8px 12px",borderRadius:6},children:['"',k.ce_qui_aurait_ete_ideal||"",'"']})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,fontWeight:700,textTransform:"uppercase",letterSpacing:.8,color:i.dm,marginBottom:4},children:"Pourquoi"}),e.jsx("div",{style:{fontSize:13.5,lineHeight:1.55,color:i.mt,fontStyle:"italic"},children:k.pourquoi||""})]})]}),n.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>r(!u),style:{display:"flex",alignItems:"center",justifyContent:"center",gap:8,width:"100%",padding:14,borderRadius:10,background:i.bgC,border:`1px solid ${i.bd}`,color:i.mt,fontSize:14,fontWeight:600,cursor:"pointer",transition:"all 0.15s",marginBottom:16,fontFamily:"inherit"},children:"üìù Relire l'√©change complet"}),u&&e.jsx("div",{style:{maxHeight:400,overflowY:"auto",background:i.bgC,border:`1px solid ${i.bd}`,borderRadius:10,padding:16,marginBottom:24},children:n.map((R,M)=>e.jsxs("div",{style:{display:"flex",gap:10,padding:"8px 0",borderBottom:M<n.length-1?`1px solid ${i.bd}33`:"none"},children:[e.jsx("span",{style:{fontSize:11,fontWeight:700,textTransform:"uppercase",letterSpacing:.5,flexShrink:0,minWidth:70,paddingTop:2,color:R.who==="user"?i.bl:i.ac},children:R.who==="user"?"Vous":"Prospect"}),e.jsx("span",{style:{fontSize:13,lineHeight:1.55,color:i.mt},children:R.text})]},M))})]}),s&&!l&&e.jsxs("div",{style:{background:`linear-gradient(135deg, ${i.acD}, ${i.ac}08)`,border:`1px solid ${i.ac}33`,borderRadius:14,padding:"28px 24px",textAlign:"center",marginTop:28},children:[e.jsx("div",{style:{fontSize:18,fontWeight:700,marginBottom:6},children:"Impressionn√© ? Ce n'est que le d√©but."}),e.jsx("div",{style:{fontSize:13,color:i.mt,lineHeight:1.6,marginBottom:20},children:"Cette simulation gratuite ne montre qu'un seul sc√©nario. Cr√©ez votre compte pour d√©bloquer toute la plateforme."}),e.jsx("div",{style:{display:"flex",justifyContent:"center",gap:16,flexWrap:"wrap",marginBottom:20},children:["‚úì 12 sc√©narios sectoriels","‚úì 3 niveaux de difficult√©","‚úì Dashboard de progression","‚úì Sc√©narios sur mesure"].map(R=>e.jsx("div",{style:{fontSize:12,color:i.mt,background:i.bgC,border:`1px solid ${i.bd}`,borderRadius:8,padding:"8px 14px"},children:R},R))}),e.jsx("a",{href:"/contact",style:{display:"inline-block",padding:"14px 32px",borderRadius:6,background:`linear-gradient(135deg, ${i.ac}, ${i.acL})`,color:"#fff",fontSize:14,fontWeight:600,textDecoration:"none"},children:"Cr√©er mon compte ‚Äî 49‚Ç¨/mois"}),e.jsx("div",{style:{fontSize:11,color:i.dm,marginTop:10},children:"Sans engagement ¬∑ Annulable √† tout moment"})]})]})}var ce={};(function a(n,s,i,l){var u=!!(n.Worker&&n.Blob&&n.Promise&&n.OffscreenCanvas&&n.OffscreenCanvasRenderingContext2D&&n.HTMLCanvasElement&&n.HTMLCanvasElement.prototype.transferControlToOffscreen&&n.URL&&n.URL.createObjectURL),r=typeof Path2D=="function"&&typeof DOMMatrix=="function",g=(function(){if(!n.OffscreenCanvas)return!1;try{var o=new OffscreenCanvas(1,1),t=o.getContext("2d");t.fillRect(0,0,1,1);var m=o.transferToImageBitmap();t.createPattern(m,"no-repeat")}catch{return!1}return!0})();function x(){}function c(o){var t=s.exports.Promise,m=t!==void 0?t:n.Promise;return typeof m=="function"?new m(o):(o(x,x),null)}var d=(function(o,t){return{transform:function(m){if(o)return m;if(t.has(m))return t.get(m);var p=new OffscreenCanvas(m.width,m.height),v=p.getContext("2d");return v.drawImage(m,0,0),t.set(m,p),p},clear:function(){t.clear()}}})(g,new Map),y=(function(){var o=Math.floor(16.666666666666668),t,m,p={},v=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(t=function(j){var S=Math.random();return p[S]=requestAnimationFrame(function f(w){v===w||v+o-1<w?(v=w,delete p[S],j()):p[S]=requestAnimationFrame(f)}),S},m=function(j){p[j]&&cancelAnimationFrame(p[j])}):(t=function(j){return setTimeout(j,o)},m=function(j){return clearTimeout(j)}),{frame:t,cancel:m}})(),z=(function(){var o,t,m={};function p(v){function j(S,f){v.postMessage({options:S||{},callback:f})}v.init=function(f){var w=f.transferControlToOffscreen();v.postMessage({canvas:w},[w])},v.fire=function(f,w,T){if(t)return j(f,null),t;var W=Math.random().toString(36).slice(2);return t=c(function(E){function A($){$.data.callback===W&&(delete m[W],v.removeEventListener("message",A),t=null,d.clear(),T(),E())}v.addEventListener("message",A),j(f,W),m[W]=A.bind(null,{data:{callback:W}})}),t},v.reset=function(){v.postMessage({reset:!0});for(var f in m)m[f](),delete m[f]}}return function(){if(o)return o;if(!i&&u){var v=["var CONFETTI, SIZE = {}, module = {};","("+a.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{o=new Worker(URL.createObjectURL(new Blob([v])))}catch(j){return typeof console<"u"&&typeof console.warn=="function"&&console.warn("üéä Could not load worker",j),null}p(o)}return o}})(),h={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function k(o,t){return t?t(o):o}function R(o){return o!=null}function M(o,t,m){return k(o&&R(o[t])?o[t]:h[t],m)}function K(o){return o<0?0:Math.floor(o)}function te(o,t){return Math.floor(Math.random()*(t-o))+o}function b(o){return parseInt(o,16)}function P(o){return o.map(_)}function _(o){var t=String(o).replace(/[^0-9a-f]/gi,"");return t.length<6&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),{r:b(t.substring(0,2)),g:b(t.substring(2,4)),b:b(t.substring(4,6))}}function F(o){var t=M(o,"origin",Object);return t.x=M(t,"x",Number),t.y=M(t,"y",Number),t}function D(o){o.width=document.documentElement.clientWidth,o.height=document.documentElement.clientHeight}function I(o){var t=o.getBoundingClientRect();o.width=t.width,o.height=t.height}function O(o){var t=document.createElement("canvas");return t.style.position="fixed",t.style.top="0px",t.style.left="0px",t.style.pointerEvents="none",t.style.zIndex=o,t}function J(o,t,m,p,v,j,S,f,w){o.save(),o.translate(t,m),o.rotate(j),o.scale(p,v),o.arc(0,0,1,S,f,w),o.restore()}function X(o){var t=o.angle*(Math.PI/180),m=o.spread*(Math.PI/180);return{x:o.x,y:o.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:o.startVelocity*.5+Math.random()*o.startVelocity,angle2D:-t+(.5*m-Math.random()*m),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:o.color,shape:o.shape,tick:0,totalTicks:o.ticks,decay:o.decay,drift:o.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:o.gravity*3,ovalScalar:.6,scalar:o.scalar,flat:o.flat}}function L(o,t){t.x+=Math.cos(t.angle2D)*t.velocity+t.drift,t.y+=Math.sin(t.angle2D)*t.velocity+t.gravity,t.velocity*=t.decay,t.flat?(t.wobble=0,t.wobbleX=t.x+10*t.scalar,t.wobbleY=t.y+10*t.scalar,t.tiltSin=0,t.tiltCos=0,t.random=1):(t.wobble+=t.wobbleSpeed,t.wobbleX=t.x+10*t.scalar*Math.cos(t.wobble),t.wobbleY=t.y+10*t.scalar*Math.sin(t.wobble),t.tiltAngle+=.1,t.tiltSin=Math.sin(t.tiltAngle),t.tiltCos=Math.cos(t.tiltAngle),t.random=Math.random()+2);var m=t.tick++/t.totalTicks,p=t.x+t.random*t.tiltCos,v=t.y+t.random*t.tiltSin,j=t.wobbleX+t.random*t.tiltCos,S=t.wobbleY+t.random*t.tiltSin;if(o.fillStyle="rgba("+t.color.r+", "+t.color.g+", "+t.color.b+", "+(1-m)+")",o.beginPath(),r&&t.shape.type==="path"&&typeof t.shape.path=="string"&&Array.isArray(t.shape.matrix))o.fill(Q(t.shape.path,t.shape.matrix,t.x,t.y,Math.abs(j-p)*.1,Math.abs(S-v)*.1,Math.PI/10*t.wobble));else if(t.shape.type==="bitmap"){var f=Math.PI/10*t.wobble,w=Math.abs(j-p)*.1,T=Math.abs(S-v)*.1,W=t.shape.bitmap.width*t.scalar,E=t.shape.bitmap.height*t.scalar,A=new DOMMatrix([Math.cos(f)*w,Math.sin(f)*w,-Math.sin(f)*T,Math.cos(f)*T,t.x,t.y]);A.multiplySelf(new DOMMatrix(t.shape.matrix));var $=o.createPattern(d.transform(t.shape.bitmap),"no-repeat");$.setTransform(A),o.globalAlpha=1-m,o.fillStyle=$,o.fillRect(t.x-W/2,t.y-E/2,W,E),o.globalAlpha=1}else if(t.shape==="circle")o.ellipse?o.ellipse(t.x,t.y,Math.abs(j-p)*t.ovalScalar,Math.abs(S-v)*t.ovalScalar,Math.PI/10*t.wobble,0,2*Math.PI):J(o,t.x,t.y,Math.abs(j-p)*t.ovalScalar,Math.abs(S-v)*t.ovalScalar,Math.PI/10*t.wobble,0,2*Math.PI);else if(t.shape==="star")for(var B=Math.PI/2*3,q=4*t.scalar,V=8*t.scalar,U=t.x,ee=t.y,re=5,G=Math.PI/re;re--;)U=t.x+Math.cos(B)*V,ee=t.y+Math.sin(B)*V,o.lineTo(U,ee),B+=G,U=t.x+Math.cos(B)*q,ee=t.y+Math.sin(B)*q,o.lineTo(U,ee),B+=G;else o.moveTo(Math.floor(t.x),Math.floor(t.y)),o.lineTo(Math.floor(t.wobbleX),Math.floor(v)),o.lineTo(Math.floor(j),Math.floor(S)),o.lineTo(Math.floor(p),Math.floor(t.wobbleY));return o.closePath(),o.fill(),t.tick<t.totalTicks}function Y(o,t,m,p,v){var j=t.slice(),S=o.getContext("2d"),f,w,T=c(function(W){function E(){f=w=null,S.clearRect(0,0,p.width,p.height),d.clear(),v(),W()}function A(){i&&!(p.width===l.width&&p.height===l.height)&&(p.width=o.width=l.width,p.height=o.height=l.height),!p.width&&!p.height&&(m(o),p.width=o.width,p.height=o.height),S.clearRect(0,0,p.width,p.height),j=j.filter(function($){return L(S,$)}),j.length?f=y.frame(A):E()}f=y.frame(A),w=E});return{addFettis:function(W){return j=j.concat(W),T},canvas:o,promise:T,reset:function(){f&&y.cancel(f),w&&w()}}}function Z(o,t){var m=!o,p=!!M(t||{},"resize"),v=!1,j=M(t,"disableForReducedMotion",Boolean),S=u&&!!M(t||{},"useWorker"),f=S?z():null,w=m?D:I,T=o&&f?!!o.__confetti_initialized:!1,W=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,E;function A(B,q,V){for(var U=M(B,"particleCount",K),ee=M(B,"angle",Number),re=M(B,"spread",Number),G=M(B,"startVelocity",Number),je=M(B,"decay",Number),Se=M(B,"gravity",Number),we=M(B,"drift",Number),de=M(B,"colors",P),Ce=M(B,"ticks",Number),ue=M(B,"shapes"),ke=M(B,"scalar"),Me=!!M(B,"flat"),me=F(B),he=U,le=[],Be=o.width*me.x,ze=o.height*me.y;he--;)le.push(X({x:Be,y:ze,angle:ee,spread:re,startVelocity:G,color:de[he%de.length],shape:ue[te(0,ue.length)],ticks:Ce,decay:je,gravity:Se,drift:we,scalar:ke,flat:Me}));return E?E.addFettis(le):(E=Y(o,le,w,q,V),E.promise)}function $(B){var q=j||M(B,"disableForReducedMotion",Boolean),V=M(B,"zIndex",Number);if(q&&W)return c(function(G){G()});m&&E?o=E.canvas:m&&!o&&(o=O(V),document.body.appendChild(o)),p&&!T&&w(o);var U={width:o.width,height:o.height};f&&!T&&f.init(o),T=!0,f&&(o.__confetti_initialized=!0);function ee(){if(f){var G={getBoundingClientRect:function(){if(!m)return o.getBoundingClientRect()}};w(G),f.postMessage({resize:{width:G.width,height:G.height}});return}U.width=U.height=null}function re(){E=null,p&&(v=!1,n.removeEventListener("resize",ee)),m&&o&&(document.body.contains(o)&&document.body.removeChild(o),o=null,T=!1)}return p&&!v&&(v=!0,n.addEventListener("resize",ee,!1)),f?f.fire(B,U,re):A(B,U,re)}return $.reset=function(){f&&f.reset(),E&&E.reset()},$}var ne;function oe(){return ne||(ne=Z(null,{useWorker:!0,resize:!0})),ne}function Q(o,t,m,p,v,j,S){var f=new Path2D(o),w=new Path2D;w.addPath(f,new DOMMatrix(t));var T=new Path2D;return T.addPath(w,new DOMMatrix([Math.cos(S)*v,Math.sin(S)*v,-Math.sin(S)*j,Math.cos(S)*j,m,p])),T}function se(o){if(!r)throw new Error("path confetti are not supported in this browser");var t,m;typeof o=="string"?t=o:(t=o.path,m=o.matrix);var p=new Path2D(t),v=document.createElement("canvas"),j=v.getContext("2d");if(!m){for(var S=1e3,f=S,w=S,T=0,W=0,E,A,$=0;$<S;$+=2)for(var B=0;B<S;B+=2)j.isPointInPath(p,$,B,"nonzero")&&(f=Math.min(f,$),w=Math.min(w,B),T=Math.max(T,$),W=Math.max(W,B));E=T-f,A=W-w;var q=10,V=Math.min(q/E,q/A);m=[V,0,0,V,-Math.round(E/2+f)*V,-Math.round(A/2+w)*V]}return{type:"path",path:t,matrix:m}}function H(o){var t,m=1,p="#000000",v='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof o=="string"?t=o:(t=o.text,m="scalar"in o?o.scalar:m,v="fontFamily"in o?o.fontFamily:v,p="color"in o?o.color:p);var j=10*m,S=""+j+"px "+v,f=new OffscreenCanvas(j,j),w=f.getContext("2d");w.font=S;var T=w.measureText(t),W=Math.ceil(T.actualBoundingBoxRight+T.actualBoundingBoxLeft),E=Math.ceil(T.actualBoundingBoxAscent+T.actualBoundingBoxDescent),A=2,$=T.actualBoundingBoxLeft+A,B=T.actualBoundingBoxAscent+A;W+=A+A,E+=A+A,f=new OffscreenCanvas(W,E),w=f.getContext("2d"),w.font=S,w.fillStyle=p,w.fillText(t,$,B);var q=1/m;return{type:"bitmap",bitmap:f.transferToImageBitmap(),matrix:[q,0,0,q,-W*q/2,-E*q/2]}}s.exports=function(){return oe().apply(this,arguments)},s.exports.reset=function(){oe().reset()},s.exports.create=Z,s.exports.shapeFromPath=se,s.exports.shapeFromText=H})((function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}})(),ce,!1);const xe=ce.exports;ce.exports.create;const ae=[{label:"Lecture du transcript",icon:"üìù",bar:"Transcript"},{label:"Analyse de l'accroche FORCE 3D",icon:"‚ö°",bar:"Accroche"},{label:"√âvaluation de la d√©couverte",icon:"üéØ",bar:"D√©couverte"},{label:"Traitement des objections",icon:"üõ°Ô∏è",bar:"Objections"},{label:"Mesure de l'engagement prospect",icon:"üìä",bar:"Engagement"},{label:"√âvaluation de la fermeture",icon:"üîë",bar:"Closing"},{label:"Profilage DISC du prospect",icon:"üß†",bar:"DISC"}];function He({target:a,duration:n=1500}){const[s,i]=C.useState(0),l=C.useRef(null),u=C.useRef(null);return C.useEffect(()=>{l.current=performance.now();function r(g){const x=g-l.current,c=Math.min(x/n,1),d=1-Math.pow(1-c,3);i(d*a),c<1&&(u.current=requestAnimationFrame(r))}return u.current=requestAnimationFrame(r),()=>cancelAnimationFrame(u.current)},[a,n]),e.jsx(e.Fragment,{children:s.toFixed(1)})}function ye(a){return a>14?{emoji:"üèÜ",label:"Excellent !",color:"#f59e0b",sound:"/sounds/success-fanfare.mp3",confetti:!0}:a>=10?{emoji:"‚úÖ",label:"Bon travail !",color:"#22c55e",sound:"/sounds/success-chime.mp3",confetti:!1}:{emoji:"üí™",label:"Continuez !",color:"#6366f1",sound:null,confetti:!1}}function et({phase:a,currentStep:n,progress:s,score:i,evalId:l,onViewDebrief:u}){const r=N(),g=C.useRef(null),x=C.useRef(!1),c=C.useMemo(()=>ae.map((h,k)=>k<n?100:k===n?a==="revealing"?100:Math.min(90,s/100*90+10):0),[n,s,a]);C.useEffect(()=>{if(a!=="revealing"||!i)return;const h=ye(i);if(h.sound)try{g.current=new Audio(h.sound),g.current.volume=.5,g.current.play().catch(()=>{})}catch{}if(h.confetti&&!x.current){x.current=!0;const R=Date.now()+2e3;(function M(){xe({particleCount:3,angle:60,spread:55,origin:{x:0,y:.6},colors:["#f59e0b","#eab308","#fbbf24"]}),xe({particleCount:3,angle:120,spread:55,origin:{x:1,y:.6},colors:["#f59e0b","#eab308","#fbbf24"]}),Date.now()<R&&requestAnimationFrame(M)})()}return()=>{g.current&&(g.current.pause(),g.current=null)}},[a,i]),C.useEffect(()=>{a==="analyzing"&&(x.current=!1)},[a]);const d=i?ye(i):null,y=ae[Math.min(n,ae.length-1)],z=a==="revealing"?100:Math.min(s,99);return e.jsxs("div",{style:{position:"fixed",inset:0,zIndex:1e4,background:"rgba(0,0,0,0.78)",backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)",display:"flex",alignItems:"center",justifyContent:"center"},children:[e.jsxs("div",{style:{background:r.bgC,border:`1px solid ${r.ac}33`,borderRadius:20,padding:"36px 32px 28px",maxWidth:500,width:"92%",boxShadow:`0 0 60px ${r.ac}15, 0 24px 64px rgba(0,0,0,0.5)`,position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",top:0,left:"50%",transform:"translateX(-50%)",width:200,height:3,background:`linear-gradient(90deg, transparent, ${a==="revealing"&&d?d.color:r.ac}, transparent)`,borderRadius:2}}),e.jsx("div",{style:{textAlign:"center",marginBottom:20},children:e.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:8,animation:"analysisLogoFloat 2.5s ease-in-out infinite"},children:[e.jsx("div",{style:{width:32,height:32,borderRadius:8,background:`linear-gradient(135deg, ${r.ac}, ${r.acL})`,display:"grid",placeItems:"center",fontWeight:800,fontSize:13,color:"#fff"},children:"VM"}),e.jsxs("div",{style:{fontSize:15,fontWeight:700,letterSpacing:-.5},children:["Vend",e.jsx("span",{style:{color:r.ac},children:"Mieux"})]})]})}),a==="analyzing"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{textAlign:"center",padding:"4px 0 16px",animation:"analysisFadeIn 0.35s ease"},children:[e.jsx("div",{style:{fontSize:38,marginBottom:8,animation:"analysisIconIn 0.4s ease"},children:y.icon}),e.jsxs("div",{style:{fontSize:14,fontWeight:600,color:r.tx},children:[y.label,"..."]})]},n),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:6,marginBottom:18},children:ae.slice(1).map((h,k)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[e.jsx("div",{style:{fontSize:11,fontWeight:600,color:k+1<=n?r.ac:r.dm,minWidth:72,textAlign:"right",transition:"color 0.3s"},children:h.bar}),e.jsx("div",{style:{flex:1,height:6,borderRadius:3,background:r.bgE,overflow:"hidden"},children:e.jsx("div",{style:{width:`${c[k+1]}%`,height:"100%",borderRadius:3,background:c[k+1]>=100?r.ok:`linear-gradient(90deg, ${r.ac}, ${r.acL})`,transition:"width 0.8s ease, background 0.3s",boxShadow:c[k+1]>0?`0 0 6px ${r.ac}40`:"none"}})}),c[k+1]>=100&&e.jsx("span",{style:{fontSize:11,color:r.ok,animation:"analysisFadeIn 0.3s ease"},children:"‚úì"})]},k))}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:16},children:[e.jsx("div",{style:{flex:1,height:8,borderRadius:4,background:r.bgE,overflow:"hidden",position:"relative"},children:e.jsx("div",{style:{width:`${z}%`,height:"100%",borderRadius:4,background:`linear-gradient(90deg, ${r.ac}, ${r.ok})`,transition:"width 0.6s ease",animation:"analysisGlow 1.5s ease-in-out infinite"}})}),e.jsxs("div",{style:{fontSize:13,fontWeight:700,color:r.ac,minWidth:38,textAlign:"right"},children:[z,"%"]})]}),e.jsxs("div",{style:{textAlign:"center",fontSize:11,color:r.dm,lineHeight:1.5,borderTop:`1px solid ${r.bd}`,paddingTop:14},children:["Claude analyse votre performance commerciale",e.jsx("br",{}),"selon les 5 axes de la m√©thode FORCE 3D¬Æ"]})]}),a==="revealing"&&d&&e.jsxs("div",{style:{textAlign:"center",animation:"analysisRevealIn 0.5s ease"},children:[e.jsx("div",{style:{fontSize:56,marginBottom:8,animation:"analysisScorePop 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275)"},children:d.emoji}),e.jsx("div",{style:{fontSize:18,fontWeight:700,color:d.color,marginBottom:16},children:d.label}),e.jsxs("div",{style:{display:"inline-flex",alignItems:"baseline",gap:4,marginBottom:20},children:[e.jsx("div",{style:{fontSize:56,fontWeight:800,color:d.color,lineHeight:1,textShadow:`0 0 30px ${d.color}40`},children:e.jsx(He,{target:i,duration:1500})}),e.jsx("div",{style:{fontSize:22,fontWeight:600,color:r.dm},children:"/20"})]}),e.jsx("div",{style:{display:"flex",gap:4,justifyContent:"center",marginBottom:24},children:ae.slice(1).map((h,k)=>e.jsx("div",{style:{width:36,height:4,borderRadius:2,background:r.ok,animation:`analysisFadeIn 0.3s ease ${k*.08}s both`},title:h.bar},k))}),(l||u)&&e.jsx("button",{onClick:u,style:{display:"inline-flex",alignItems:"center",gap:8,padding:"14px 28px",borderRadius:10,fontSize:15,fontWeight:700,cursor:"pointer",background:`linear-gradient(135deg, ${r.ac}, ${r.acL})`,color:"#fff",border:"none",fontFamily:"inherit",boxShadow:`0 4px 20px ${r.acD}`,transition:"transform 0.15s, box-shadow 0.15s"},children:"Voir mon analyse compl√®te ‚Üí"})]})]}),e.jsx("style",{children:`
        @keyframes analysisLogoFloat {
          0%, 100% { transform: translateY(0); }
          50% { transform: translateY(-3px); }
        }
        @keyframes analysisFadeIn {
          from { opacity: 0; transform: translateY(6px); }
          to { opacity: 1; transform: translateY(0); }
        }
        @keyframes analysisIconIn {
          from { opacity: 0; transform: translateY(10px) scale(0.85); }
          to { opacity: 1; transform: translateY(0) scale(1); }
        }
        @keyframes analysisGlow {
          0%, 100% { box-shadow: 0 0 8px ${r.ac}40; }
          50% { box-shadow: 0 0 18px ${r.ac}70; }
        }
        @keyframes analysisRevealIn {
          from { opacity: 0; transform: scale(0.92); }
          to { opacity: 1; transform: scale(1); }
        }
        @keyframes analysisScorePop {
          0% { transform: scale(0); opacity: 0; }
          60% { transform: scale(1.15); }
          100% { transform: scale(1); opacity: 1; }
        }
      `})]})}export{et as A,Ge as D,Ze as L,Ke as S,Ye as a,Xe as b,Qe as c,ae as d,Je as u};
